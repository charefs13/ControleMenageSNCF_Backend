// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
  moduleFormat = "commonjs"
}

datasource db {
  provider = "postgresql"
}


model Formulaire {
  id            String      @id
  dateCreation  DateTime    @default(now())
  conforme      Boolean
  dateControle  DateTime
  utilisateurCp String
  Utilisateur   Utilisateur @relation(fields: [utilisateurCp], references: [cp])

  @@index([utilisateurCp])
}

model Utilisateur {
  cp                String       @id @unique 
  email             String       @unique
  nom               String
  prenom            String
  mdp               String?
  role              Role?        @default(UTILISATEUR)
  dateCreation      DateTime     @default(now())
  accepteConditions Boolean        @default(false)
  Formulaire        Formulaire[]
  authToken  String?
}

enum Role {
  UTILISATEUR
  ADMIN
}
